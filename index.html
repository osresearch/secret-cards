<html>
<head>
<script src="util.js"></script>
<script src="sha256.js"></script>
<script src="sra.js"></script>
<script src="cards.js"></script>
</head>
<body>
<script>
let cards = "🂡🂢🂣🂤🂥🂦🂧🂨🂩🂪🂫🂬🂭🂮🂱🂲🂳🂴🂵🂶🂷🂸🂹🂺🂻🂼🂽🂾🃁🃂🃃🃄🃅🃆🃇🃈🃉🃊🃋🃌🃍🃎🃑🃒🃓🃔🃕🃖🃗🃘🃙🃚🃛🃜🃝🃞";

function add_card(id, new_card)
{
	let suite = Math.floor(new_card / 12);
	let card = document.createElement('div');
	card.setAttribute('id', 'card-' + new_card);
	if (suite == 1 || suite == 2)
		card.setAttribute('style', 'color:red');
	else
		card.setAttribute('style', 'color:black');
	card.innerHTML = cards.substr(new_card*2, 2);
	document.querySelector(id).appendChild(card);
}
</script>

<form id="ui">
<input type="button" value="Shuffle" onclick="
	console.log('Creating dealer');
	d = new DeckDealer(52);

	console.log('Creating player');
	p = new DeckPlayer(d.export());

	console.log('Importing shuffled deck');
	d.import(p.export());

	document.querySelector('#player').innerHTML='';
	document.querySelector('#dealer').innerHTML='';
"/>

<input type="button" value="Deal to dealer" onclick="
	let new_card = d.receive(p.deal());
	if (new_card)
		add_card('#dealer', Number(new_card));
" />

<input type="button" value="Dealer draw" onclick="
	let new_card = d.receive(p.drawn(d.draw()));
	if (new_card)
		add_card('#dealer', Number(new_card));
" />


<input type="button" value="Deal to player" onclick="
	let new_card = p.receive(d.deal());
	if (new_card)
		add_card('#player', Number(new_card));
" />

<input type="button" value="Player draw" onclick="
	let new_card = p.receive(d.drawn(p.draw()));
	if (new_card)
		add_card('#player', Number(new_card));
" />
</form>

<table>
<tr>
<td>
<div id="dealer" style="font-size:64px"></div>
</td>
<td>
<div id="player" style="font-size:64px"></div>
</td>
</tr>
</table>

</body>
</html>
